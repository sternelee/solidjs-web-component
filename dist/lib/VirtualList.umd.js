(function(S,T){typeof exports=="object"&&typeof module!="undefined"?module.exports=T():typeof define=="function"&&define.amd?define(T):(S=typeof globalThis!="undefined"?globalThis:S||self,S.VirtualList=T())})(this,function(){"use strict";const S={},D={equals:(e,s)=>e===s};let Z=G;const b={},v=1,O=2,z={owned:null,cleanups:null,context:null,owner:null};var g=null;let x=null,r=null,E=null,u=null,w=null,B=0;function H(e,s){s=s?Object.assign({},D,s):D;const t={value:e,observers:null,observerSlots:null,pending:b,comparator:s.equals||void 0},i=n=>(typeof n=="function"&&(n=n(t.pending!==b?t.pending:t.value)),M(t,n));return[te.bind(t),i]}function _(e,s,t){const i=ie(e,s,!1,v);P(i)}function k(e){if(E)return e();let s;const t=E=[];try{s=e()}finally{E=null}return V(()=>{for(let i=0;i<t.length;i+=1){const n=t[i];if(n.pending!==b){const f=n.pending;n.pending=b,M(n,f)}}},!1),s}function ee(e){let s,t=r;return r=null,s=e(),r=t,s}function te(){const e=x;if(this.sources&&(this.state||e)){const s=u;u=null,this.state===v||e?P(this):R(this),u=s}if(r){const s=this.observers?this.observers.length:0;r.sources?(r.sources.push(this),r.sourceSlots.push(s)):(r.sources=[this],r.sourceSlots=[s]),this.observers?(this.observers.push(r),this.observerSlots.push(r.sources.length-1)):(this.observers=[r],this.observerSlots=[r.sources.length-1])}return this.value}function M(e,s,t){if(e.comparator&&e.comparator(e.value,s))return s;if(E)return e.pending===b&&E.push(e),e.pending=s,s;let i=!1;return e.value=s,e.observers&&e.observers.length&&V(()=>{for(let n=0;n<e.observers.length;n+=1){const f=e.observers[n];i&&x.disposed.has(f),f.pure?u.push(f):w.push(f),f.observers&&(i&&!f.tState||!i&&!f.state)&&F(f),i||(f.state=v)}if(u.length>1e6)throw u=[],new Error},!1),s}function P(e){if(!e.fn)return;j(e);const s=g,t=r,i=B;r=g=e,se(e,e.value,i),r=t,g=s}function se(e,s,t){let i;try{i=e.fn(s)}catch(n){W(n)}(!e.updatedAt||e.updatedAt<=t)&&(e.observers&&e.observers.length?M(e,i):e.value=i,e.updatedAt=t)}function ie(e,s,t,i=v,n){const f={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:s,owner:g,context:null,pure:t};return g===null||g!==z&&(g.owned?g.owned.push(f):g.owned=[f]),f}function q(e){const s=x;if(e.state!==v)return e.state=0;if(e.suspense&&ee(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<B);)(e.state||s)&&t.push(e);for(let i=t.length-1;i>=0;i--)if(e=t[i],e.state===v||s)P(e);else if(e.state===O||s){const n=u;u=null,R(e,t[0]),u=n}}function V(e,s){if(u)return e();let t=!1;s||(u=[]),w?t=!0:w=[],B++;try{return e()}catch(i){W(i)}finally{ne(t)}}function ne(e){u&&(G(u),u=null),!e&&(w.length?k(()=>{Z(w),w=null}):w=null)}function G(e){for(let s=0;s<e.length;s++)q(e[s])}function R(e,s){e.state=0;const t=x;for(let i=0;i<e.sources.length;i+=1){const n=e.sources[i];n.sources&&(n.state===v||t?n!==s&&q(n):(n.state===O||t)&&R(n,s))}}function F(e){const s=x;for(let t=0;t<e.observers.length;t+=1){const i=e.observers[t];(!i.state||s)&&(i.state=O,i.pure?u.push(i):w.push(i),i.observers&&F(i))}}function j(e){let s;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),i=e.sourceSlots.pop(),n=t.observers;if(n&&n.length){const f=n.pop(),l=t.observerSlots.pop();i<n.length&&(f.sourceSlots[l]=i,n[i]=f,t.observerSlots[i]=l)}}if(e.owned){for(s=0;s<e.owned.length;s++)j(e.owned[s]);e.owned=null}if(e.cleanups){for(s=0;s<e.cleanups.length;s++)e.cleanups[s]();e.cleanups=null}e.state=0,e.context=null}function W(e){throw e}function Q(e,s,t){let i=t.length,n=s.length,f=i,l=0,o=0,m=s[n-1].nextSibling,y=null;for(;l<n||o<f;){if(s[l]===t[o]){l++,o++;continue}for(;s[n-1]===t[f-1];)n--,f--;if(n===l){const c=f<i?o?t[o-1].nextSibling:t[f-o]:m;for(;o<f;)e.insertBefore(t[o++],c)}else if(f===o)for(;l<n;)(!y||!y.has(s[l]))&&s[l].remove(),l++;else if(s[l]===t[f-1]&&t[o]===s[n-1]){const c=s[--n].nextSibling;e.insertBefore(t[o++],s[l++].nextSibling),e.insertBefore(t[--f],c),s[n]=t[f]}else{if(!y){y=new Map;let a=o;for(;a<f;)y.set(t[a],a++)}const c=y.get(s[l]);if(c!=null)if(o<c&&c<f){let a=l,A=1,h;for(;++a<n&&a<f&&!((h=y.get(s[a]))==null||h!==c+A);)A++;if(A>c-o){const p=s[l];for(;o<c;)e.insertBefore(t[o++],p)}else e.replaceChild(t[o++],s[l++])}else l++;else s[l++].remove()}}}function le(e,s,t){const i=document.createElement("template");i.innerHTML=e;let n=i.content.firstChild;return t&&(n=n.firstChild),n}function oe(e,s,t,i){if(t!==void 0&&!i&&(i=[]),typeof s!="function")return $(e,s,i,t);_(n=>$(e,s(),n,t),i)}function $(e,s,t,i,n){for(S.context&&!t&&(t=[...e.childNodes]);typeof t=="function";)t=t();if(s===t)return t;const f=typeof s,l=i!==void 0;if(e=l&&t[0]&&t[0].parentNode||e,f==="string"||f==="number")if(f==="number"&&(s=s.toString()),l){let o=t[0];o&&o.nodeType===3?o.data=s:o=document.createTextNode(s),t=N(e,t,i,o)}else t!==""&&typeof t=="string"?t=e.firstChild.data=s:t=e.textContent=s;else if(s==null||f==="boolean")t=N(e,t,i);else{if(f==="function")return _(()=>{let o=s();for(;typeof o=="function";)o=o();t=$(e,o,t,i)}),()=>t;if(Array.isArray(s)){const o=[];if(U(o,s,n))return _(()=>t=$(e,o,t,i,!0)),()=>t;if(o.length===0){if(t=N(e,t,i),l)return t}else Array.isArray(t)?t.length===0?X(e,o,i):Q(e,t,o):t==null||t===""?X(e,o):Q(e,l&&t||[e.firstChild],o);t=o}else if(s instanceof Node){if(Array.isArray(t)){if(l)return t=N(e,t,i,s);N(e,t,null,s)}else t==null||t===""||!e.firstChild?e.appendChild(s):e.replaceChild(s,e.firstChild);t=s}}return t}function U(e,s,t){let i=!1;for(let n=0,f=s.length;n<f;n++){let l=s[n],o;if(l instanceof Node)e.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))i=U(e,l)||i;else if((o=typeof l)==="string")e.push(document.createTextNode(l));else if(o==="function")if(t){for(;typeof l=="function";)l=l();i=U(e,Array.isArray(l)?l:[l])||i}else e.push(l),i=!0;else e.push(document.createTextNode(l.toString()))}return i}function X(e,s,t){for(let i=0,n=s.length;i<n;i++)e.insertBefore(s[i],t)}function N(e,s,t,i){if(t===void 0)return e.textContent="";const n=i||document.createTextNode("");if(s.length){let f=!1;for(let l=s.length-1;l>=0;l--){const o=s[l];if(n!==o){const m=o.parentNode===e;!f&&!l?m?e.replaceChild(n,o):e.insertBefore(n,t):m&&o.remove()}else f=!0}}else e.insertBefore(n,t);return[n]}var Y={"view-area":"_view-area_1iyu1_1","virtual-inner":"_virtual-inner_1iyu1_5"};const fe=le("<div><div><div></div></div></div>");return({rowRenderer:e})=>{const s=50,t=12e3,i=400,n=10,f=s*t-i,l=new Array(n).fill(0).map((h,p)=>h+p),[o,m]=H(0),[y,c]=H(0);let a;const A=h=>{const{scrollTop:p=0}=a??{};if(f<=p){c(t-n),m(f);return}const C=Math.floor(p/s),I=p%s;c(C),m(p-I)};return(()=>{const h=fe.cloneNode(!0),p=h.firstChild,C=p.firstChild;h.addEventListener("scroll",A);const I=a;return typeof I=="function"?I(h):a=h,h.style.setProperty("height","400px"),p.style.setProperty("height","600000px"),oe(C,()=>l.map(d=>{const L=d+y();return e({index:L,domIndex:d})})),_(d=>{const L=Y["view-area"],J=Y["virtual-inner"],K=`translateY(${o()}px)`;return L!==d._v$&&(h.className=d._v$=L),J!==d._v$2&&(C.className=d._v$2=J),K!==d._v$3&&C.style.setProperty("transform",d._v$3=K),d},{_v$:void 0,_v$2:void 0,_v$3:void 0}),h})()}});
